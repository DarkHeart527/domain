<html>
	<head>
		<script>
		var playing = false;
		var playType = "Default";
		var songListSearch;
		var songList;
		var songListMax; //Maximum Number Of Tracks
		var songListMin = 0; //Minimum Number Of Tracks
		var songListCurrent;
		var songTitle;
		var artistNumber = 0;
		var songArtist;
		var songUrl;
		var songDuration;
		var Sinterval;
		var pictureC = 1;
		var audio = {
		 pausePlay: function() {
			 if (document.getElementById('playPause').value == "paused") {
			  document.getElementById('playPause').innerHTML = "Pause"
			  document.getElementById('audio').play();
			  document.getElementById('playPause').value = "playing";
			 } else {
			  document.getElementById('playPause').innerHTML = "Play"
			  document.getElementById('audio').pause();
			  document.getElementById('playPause').value = "paused"
			 }
			 if (playing == false) {
			  startMusic();
			  document.getElementById('playPause').value = "playing";
			 }
			},
		}
		var songListSearch = document.getElementsByClassName("Artist");
			function startMusic() {
			 if (playing == true) {
			 } else {
			  document.getElementById('playPause').innerHTML = "Pause"
			  playing = true;
			  songListMin = 0; //Minimum Number Of Tracks
			  songListCurrent = songListMin;
			  startMusic();
			 }
			 if (playType == "Default") {
			  console.info("All The Music");
			  console.info(songListSearch);
			  songList = songListSearch[artistNumber].getElementsByClassName("track");
			  songListMax = songList.length - 1; //Maximum Number Of Tracks
			  songTitle = songList[songListCurrent].attributes.infoTitle.value;
			  songArtist = songListSearch[artistNumber].attributes.infoArtist.value;
			  songUrl = songList[songListCurrent].attributes.url.value;
			  document.getElementById('title').innerHTML = songTitle;
			  document.getElementById('artist').innerHTML = songArtist;
			  document.getElementById('currentArtist').innerHTML = songArtist;
			  document.getElementById('audio').src = 'music/' + songArtist+ "/" + songUrl;
			 }
			}
			
			function changedArtist() {
			 for (i = 0;songListSearch.length > i;i++) {
			  songListSearch[i].style = '';
			  if (i == songListSearch.length - 1) {
			   songListSearch[artistNumber].style = "visibility: visible;";
			  }
			 }
			 document.getElementById('playPause').innerHTML = "Play"
			 playing = false;
			 songListCurrent = 0;
			if (playing == true) {
			} else {
			  songListMin = 0; //Minimum Number Of Tracks
			  songListCurrent = songListMin;
			}
			 if (playType == "Default") {
			  console.log(songListSearch);
			  songList = songListSearch[artistNumber].getElementsByClassName("track");
			  songListMax = songList.length - 1; //Maximum Number Of Tracks
			  songTitle = songList[songListCurrent].attributes.infoTitle.value;
			  songArtist = songListSearch[artistNumber].attributes.infoArtist.value;
			  songUrl = songList[songListCurrent].attributes.url.value;
			  document.getElementById('currentArtist').innerHTML = songArtist;
			 }
			 document.getElementsByClassName('trackList')[0].style = "height: " + Number((songList.length + 1)* 40) + "px;"
			}
			function songEnded() {
			 if (songListCurrent == songListMax) {
			  if (playType == "Default") {
			    songListCurrent = 0;
			   }
			 } else {
			  songListCurrent = songListCurrent + 1;	 
			 }
			 startMusic();
			}
			function showTime() {
			 var currentMath = document.getElementById('audio').currentTime / songDuration;
			 var afterMath = currentMath * 100;
			 document.getElementById('progress').style = 'width: ' + afterMath + '%';
			}
			setTimeout( function() {
			setInterval( function() {
			 if (pictureC == 1) {
			 document.getElementById('animationPicture').style = "background: url('pictures/progress1.png');";
			 } else if (pictureC == 2) {
			 document.getElementById('animationPicture').style = "background: url('pictures/progress2.png');";
			 } else if (pictureC == 3) {
			 document.getElementById('animationPicture').style = "background: url('pictures/progress3.png');";
			 } else if (pictureC == 4) {
			 document.getElementById('animationPicture').style = "background: url('pictures/progress4.png');";
			 }
			 pictureC = pictureC + 1;
			 if (pictureC == 4) {
			  pictureC = 1;
			 }
			}, document.getElementById('animationPicture').attributes.animationDelay.value);
			}, 250);
			function previous() {
			 if (songListCurrent == songListMin) {
			  songListCurrent = songListMax;
			 } else {
			  songListCurrent = songListCurrent - 1;
			 }
			 startMusic();
			}
			function next() {
			 if (songListCurrent == songListMax) {
			  songListCurrent = songListMin;
			 } else {
			  songListCurrent = songListCurrent + 1;
			 }
			 startMusic();
			}
			function nextArtist() {
			if (artistNumber < songListSearch.length - 1) {
			  artistNumber += 1;
			  changedArtist();
			 }
			}
			function prevArtist() {
			if (artistNumber > 0) {
			   artistNumber -= 1;
			   changedArtist();
			  }
			 }
			function openSearch() {
			 document.getElementById('searchTab').style = "visibility: visible";
			}
			function closeSearch() {
			 document.getElementById('searchTab').style = "";
			}
		</script>
		<link href="styling/positioning.css" rel="stylesheet" type="text/css" />
	</head>
	<body>
		<img class="preLoad" src="pictures/progress1.png"></img>
		<img class="preLoad" src="pictures/progress2.png"></img>
		<img class="preLoad" src="pictures/progress3.png"></img>
		<img class="preLoad" src="pictures/progress4.png"></img>
		<img class="preLoad" src="pictures/progress11.png"></img>
		<img class="preLoad" src="pictures/progress12.png"></img>
		<img class="preLoad" src="pictures/progress13.png"></img>
		<div class="holder">
			<div class="imageHolder">
				<img src="pictures/none.png" id="image" />
				<p id="title">Energy</p>
				<p id="artist">Drake</p>
			</div>
			<div id="progressBarHolder">
				<div id="progress">
					<div id="progressPicOverlay">
						<div id="animationPicture" animationDelay="250">
						</div>
					</div>
				</div>
			</div>
			<div class="center">
				<span id="leftABtn" onclick="prevArtist()">&#8666;</span>
				<span id="currentArtist" onClick="openSearch()">Drake</span>
				<span id="nextABtn" onclick="nextArtist()">&#8667;</span>
			</div>
			<div>
				<button id="" onclick="previous();">Previous</button>
				<button id="playPause" onclick="audio.pausePlay();">Play</button>
				<button id="" onclick="next();">Next</button>
			</div>
			<div class="scrollable">
				<ul class="trackList" style="height: 120px;">
					<ul class="Artist" infoArtist="Drake" style="visibility: visible;">
						<li class="track" infoTitle="Energy" url="Energy.mp3"></li>
						<li class="track" infoTitle="Headlines" url="Headlines.mp3"></li>
					</ul>
					<ul class="Artist" infoArtist="Linkin Park">
						<li class="track" infoTitle="Cure For The Itch" url="Cure For The Itch.mp3"></li>
						<li class="track" infoTitle="In The End" url="In The End.mp3"></li>
						<li class="track" infoTitle="Forgotten" url="Forgotten.mp3"></li>
						<li class="track" infoTitle="High Voltage" url="High Voltage.mp3"></li>
						<li class="track" infoTitle="By Myself" url="By Myself.mp3"></li>
						<li class="track" infoTitle="In Pieces" url="In Pieces.mp3"></li>
					</ul>
				</ul>
			</div>
		</div>
		<audio id="audio" onloadedmetadata="songDuration = document.getElementById('audio').duration;" onplay="Sinterval = setInterval(function() { showTime(); })" onended="songEnded();" src="" autoplay>
		</audio>
		<div class="linkChangeLogD">
			<a class="linkChangeLog" href="CHANGE LOG.txt" target="_blank">Change Log</a>
		</div>
		<div id="searchTab">
			<div class="clickable" onclick="closeSearch()">X</div>
		</div>
		<script>
			for (i = 0;document.getElementsByClassName('track').length > i; i++) {
			 var a = document.getElementsByClassName('track');
			 a[i].innerHTML = a[i].attributes.infoTitle.value;
			 a[i].value = i;
			 a[i].onclick = function() {
			  this.id = "clicked"
			  var sartist = this.parentElement;
			  var sartist2 = sartist.parentElement;
			  var songs = sartist.getElementsByClassName('track');
			  songTitle = this.attributes.infoTitle.value;
			  songArtist = sartist.attributes.infoArtist.value;
			  songUrl = this.attributes.url.value;
			  document.getElementById('title').innerHTML = songTitle;
			  document.getElementById('artist').innerHTML = songArtist;
			  document.getElementById('currentArtist').innerHTML = songArtist;
			  document.getElementById('audio').src = 'music/' + songArtist + "/" + songUrl;
			  document.getElementById('playPause').innerHTML = "Pause"
			  this.id = '';
			 }
			}
		</script>
	</body>
</html>
